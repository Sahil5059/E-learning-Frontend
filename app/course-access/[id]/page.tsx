//STEP: 145 ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
"use client";
import { redirect } from 'next/navigation';
import { useLoadUserQuery } from '../../../redux/features/api/apiSlice';
import React, { useEffect } from 'react';
import Loader from '../../../app/components/Loader/Loader';
import CourseContent from '../../../app/components/Course/CourseContent';
//defining-props
type Props = {
    params:any;
}
//creating-data
const Page = ({params}: Props) => {
  const id = params.id;
  const {isLoading,error,data} = useLoadUserQuery(undefined, {});
  //watch- 1:51:18 to 1:51:30
  useEffect(() => {
    if(!isLoading){
        if(data){
            const isPurchased = data.user.courses.find((item:any) => item._id === id); //verifying if the user has bought the course
            if(!isPurchased){
                redirect("/");
            }
            if(error){
                redirect("/");
            }
        }else{
            redirect("/");
        }
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [data,error]);
  return (
    //first, create a file "../../components/Course/CourseContent.tsx", code in it and then come back here
    <div className="max-w-[1920px]">
        {
            isLoading ? (<Loader />) : (
                <div>
                    <CourseContent id={id} user={data.user} />
                </div>
                //now, we will set up the search-bar
            )
        }
    </div>
  )
}
//exporting-data
export default Page;
//OVER: 145("m": ../../Route/Hero.tsx) ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////